(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(14),c=t.n(o),r=t(3),u=t(2),a=t(0),l=function(e){var n=e.value,t=e.handleChange,o=e.text;return Object(a.jsxs)("div",{children:[o," ",Object(a.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.handleSubmission,t=e.nameValue,o=e.handleNameChange,c=e.numberValue,r=e.handleNumberChange;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:o})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:c,onChange:r})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},i=function(e){var n=e.list,t=e.filterString,o=e.handleDelete;return Object(a.jsx)("ul",{children:n.filter((function(e){return-1!==e.name.toLowerCase().search(t.toLowerCase())})).map((function(e){return Object(a.jsxs)("li",{children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:o(e),children:"delete"})]},e.name)}))})},d=function(e){var n=e.message;if(null===n)return Object(a.jsx)("div",{});var t=n.text,o={color:n.successful?"green":"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(a.jsx)("div",{style:o,children:t})},f=t(4),h=t.n(f),b="/api/persons",j=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m={getAll:function(){return h.a.get(b).then((function(e){return e.data}))},create:function(e){return h.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},deleteUsingID:j,deleteUsingObject:function(e){return j(e.id)}},g=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),f=Object(r.a)(c,2),h=f[0],b=f[1],j=Object(u.useState)(""),g=Object(r.a)(j,2),p=g[0],O=g[1],x=Object(u.useState)(""),v=Object(r.a)(x,2),w=v[0],C=v[1],S=Object(u.useState)(null),k=Object(r.a)(S,2),y=k[0],D=k[1],T=function(){O(""),C("")};Object(u.useEffect)((function(){console.log("effect"),m.getAll().then((function(e){console.log("promise fulfilled"),o(e)}))}),[]),console.log("rendered",t.length,"persons");return console.log("rendering with",t),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(d,{message:y}),Object(a.jsx)(l,{value:h,handleChange:function(e){console.log(e.target.value),b(e.target.value)},text:"filter shown with"}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsx)(s,{handleSubmission:function(e){if(e.preventDefault(),console.log("attempting to add name"),""!==p){var n={name:p,number:w};console.log("new person",n);var c=t.find((function(e){return e.name===p}));console.log("found match:",c),void 0!==c&&window.confirm("".concat(p," is already added to phonebook, replace the old number with a new one?"))?m.update(c.id,n).then((function(e){console.log("updated person",e),o(t.map((function(n){return n.id===e.id?e:n}))),T()})).then((function(){D({text:"Updated ".concat(p),successful:!0}),setTimeout((function(){return D(null)}),5e3)})).catch((function(e){console.error(e.response.data),e.response.data.error.search("shorter than")||(console.log("A"),o(t.filter((function(e){return e.id!==c.id})))),D({text:e.response.data.error,successful:!1}),setTimeout((function(){return D(null)}),5e3)})).catch((function(e){console.log("B"),o(t.filter((function(e){return e.id!==c.id}))),D({text:"Information of ".concat(c.name," has already been removed from server"),successful:!1}),setTimeout((function(){return D(null)}),5e3)})):m.create(n).then((function(e){o(t.concat(e)),T(),console.log("new person added to list",t,n)})).then((function(){D({text:"Added ".concat(p),successful:!0}),setTimeout((function(){return D(null)}),5e3)})).catch((function(e){console.error(e.response.data),D({text:e.response.data.error,successful:!1}),setTimeout((function(){return D(null)}),5e3)}))}else console.log("empty name was not submitted")},nameValue:p,handleNameChange:function(e){console.log(e.target.value),O(e.target.value)},numebrValue:w,handleNumberChange:function(e){console.log(e.target.value),C(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(i,{list:t,filterString:h,handleDelete:function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&m.deleteUsingObject(e).then((function(n){o(t.filter((function(n){return n!==e}))),D({text:"Deleted ".concat(e.name),successful:!0}),setTimeout((function(){return D(null)}),5e3)}))}}})]})};c.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0258c744.chunk.js.map